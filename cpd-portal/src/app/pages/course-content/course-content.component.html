<div class="course-content-container">
  <div *ngIf="isLoading" class="loading-message">Loading training module...</div>
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

  <div *ngIf="!isLoading && !errorMessage && course">

    <!-- HEADER -->
    <div class="course-header">
      <button class="btn-back" (click)="goBack()">â† Back</button>
      <h1>{{ course.title }}</h1>
      <div class="progress-info">
        <span class="lesson-count">Lesson {{ currentLessonIndex + 1 }} of {{ lessons.length }}</span>
        <span class="required-hours">Annual Requirement: {{ course.required_hours }} Hours</span>
        <span class="save-status" [ngClass]="{
          'saving': saveStatus === 'saving',
          'saved': saveStatus === 'saved',
          'error': saveStatus === 'error'
        }">
          <span *ngIf="saveStatus === 'saving'">ğŸ’¾ Saving...</span>
          <span *ngIf="saveStatus === 'saved'">âœ“ Saved</span>
          <span *ngIf="saveStatus === 'error'">âš  Save failed</span>
        </span>
      </div>
    </div>

    <!-- LESSON CONTENT -->
    <div *ngIf="currentLesson" class="content-card">
      <div class="card-header">
        <h2>{{ currentLesson.title }}</h2>
      </div>
      <div class="card-body training-text" [innerHTML]="currentLesson.content"></div>

      <div class="card-actions">
        <button *ngIf="currentLessonIndex > 0" class="btn-secondary" (click)="previousLesson()">
          â† Previous
        </button>

        <button *ngIf="!isLastLesson" class="btn-primary" (click)="nextLesson()">
          Next Lesson â†’
        </button>

        <button *ngIf="isLastLesson" class="btn-success" (click)="completeTraining()" [disabled]="isCompleting">
          {{ isCompleting ? 'Completing...' : 'Complete Training' }}
        </button>
      </div>
    </div>

    <div *ngIf="lessons.length === 0 && !isLoading" class="content-card">
      <div class="card-body text-center">
        <p>No training content available for this course.</p>
        <button class="btn-primary" (click)="goBack()">Return to Dashboard</button>
      </div>
    </div>

  </div>
</div>